<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <head lang="en">
    <meta charset="UTF-8" />
    <title>Layout</title>
  </head>
  <body>
      <div  th:fragment="cardpic">
<!-- Defaul message for no posts -->
<div th:if="${posts.empty}">
        <br />
        <div class="card">
          <div class="card-body">
            No chirps yet, i hope we hear you singing soon!
          </div>
        </div>
    </div>
    <!-- Default message end -->
    <!-- Post start -->
      <div th:each="post: ${posts}" th:unless="${posts.empty}">
          <div>
            <br />
            <div class="card">
              <div class="card-header">
                <span th:if="${post.account.profilePicId} == null"
                ><img
                  class="card-img-thumbnail"
                  style="width: 5vh; height: auto;"
                  src="../public/img/cartoon-bird-hi.png"
                  th:src="@{/img/cartoon-bird-hi.png}"
                  alt=""
                  width="5%"
                  height="5%"
              /></span>
              <span th:unless="${post.account.profilePicId} == null"
                ><img
                  class="card-img-thumbnail rounded-circle"
                  style="contain:none; object-fit:cover; width: 5vh; height: 5vh;"
                  th:src="@{/profile/img/{id}(id=${post.account.profilePicId})}"
                  alt=""
                  width="10%"
                  height="10%"
              /></span>
                  <span
                    class="text"
                    th:text="${post.account.firstName} + ' ' + ${post.account.lastName}"
                    >Username</span
                  >
                  <small
                    ><a style="color:darkred;" th:href="@{/profile/{username}(username=${post.account.username})}" th:text="'@' + ${post.account.username}"
                      >username</a
                    ></small
                  >
                  <span
                    class="text float-right"
                    th:text="${post.date} + ' ' + ${post.time}"
                  >
                    11:54</span
                  >
                </div>
              </div>
              <div class="card-body">
                <p class="card-text" th:text="${post.content}">
                  Enter some text here
                </p>
                <a
                  th:href="@{/profile/{username}/post/{id}/like(id=${post.id}, username=${user.username})}"
                  ><i class="fas fa-heart" style="color:red"> </i></a
                ><span th:text="' ' + ${#lists.size(post.likes)}">0</span>
              </div>
              
              <!-- No comments default start -->
              <div
                class="card-footer bg-white container"
                th:if="${post.comment.empty}"
              >
                No tweetback yet!
              </div>
              <!-- No comments default end -->
              <!-- Comments start -->
              <div
                class="card-footer bg-white container"
                th:unless="${post.comment.empty}"
              >
                <div th:each="comment : ${post.comment}">
                  <div>
                      <div>
                          <span th:if="${comment.user.profilePicId} == null"
                          ><img
                          class="card-img-thumbnail float-left"
                          style="contain:none; object-fit:cover; width: 5vh; height: 5vh;"
                          src="../public/img/cartoon-bird-hi.png"
                          th:src="@{/img/cartoon-bird-hi.png}"
                            width="10%"
                     
                        /></span>
                        <span th:unless="${comment.user.profilePicId} == null"
                          ><img
                          class="card-img-thumbnail rounded-circle float-left"
                          style="contain:none; object-fit:cover; width: 5vh; height: 5vh;"
                            th:src="@{/profile/img/{id}(id=${comment.user.profilePicId})}"
                            alt="avatar"
                        /></span>
                    <small
                      ><a style="color:darkred;" class="nav-link active" th:href="@{/profile/{username}(username=${comment.user.username})}" th:text="'@' + ${comment.user.username}"
                        >username</a
                      >
                      <span
                        class="text float-right"
                        th:text="${comment.date} + ' ' + ${comment.time}"
                      >
                        11:54</span
                      >
                    </small>
                  </div>
                  <p class="container" th:text="${comment.content}">
                    comment
                  </p>
                </span>
              </div>
              <!-- Comments end -->
              <!-- Make a comment start -->
              <div class="card-footer bg-white">
                <span class="text text-muted">Add a tweet</span>
                <div class="form-group">
                  <form
                    th:action="@{/profile/feed/{username}/comment/{id}(username=${user.username}, id=${post.id})}"
                    method="post"
                  >
                    <div class="input-group mb-3">
                      <input type="text" name="comment" id="comment" class="form-control" placeholder="Your tweetback..." aria-label="Recipient's username" aria-describedby="basic-addon2">
                      <div class="input-group-append">
                        <button class="btn btn-danger" type="submit">Tweet</button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
              <!-- Make a comment end -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Post end -->
  </body>
</html>